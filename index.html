<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CHECK VIP SYSTEM</title>

<style>
body{
  margin:0;
  font-family:Segoe UI,Roboto,Arial;
  background:radial-gradient(circle at top,#0f172a,#020617);
  color:#f1f5f9;
}

/* LOGIN */
.loginScreen{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:#000;display:flex;justify-content:center;align-items:center;z-index:999;
}
.loginBox{
  background:#0b1220;padding:40px;border-radius:25px;width:350px;text-align:center;
  box-shadow:0 0 40px rgba(255,215,0,0.3);
}
.loginBox input{
  width:100%;padding:12px;border-radius:15px;border:none;
  background:#111827;color:white;margin-bottom:12px;
}
.loginBox button{
  width:100%;padding:12px;border-radius:15px;border:none;
  background:gold;color:black;font-weight:700;cursor:pointer;
}
#errorMsg{height:18px;font-size:13px;color:#ef4444;}

/* LAYOUT */
.main{display:flex;height:100vh;}
.left{flex:7;padding:50px;}
.right{flex:3;padding:40px;background:#081022;border-left:1px solid rgba(255,255,255,0.05);}
.box,.adminBox{background:#0b1220;border-radius:30px;padding:40px;height:100%;}

/* TITLE */
.title{
  text-align:center;font-size:32px;font-weight:800;margin-bottom:40px;
  background:linear-gradient(90deg,#FFD700,#ffae00,#FFD700);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}

/* INPUT */
.inputRow{display:flex;gap:20px;}
.mainInput{
  flex:1;padding:20px;border-radius:30px;
  border:1px solid rgba(255,215,0,0.3);background:#111827;color:white;
}
.checkBtn{
  padding:20px 50px;border-radius:30px;border:none;font-weight:700;
  background:linear-gradient(45deg,#FFD700,#ffb700);color:black;cursor:pointer;
}

/* RESULT */
#out{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
gap:30px;margin-top:40px;}
.item{
  background:linear-gradient(145deg,#111,#1a1a1a);
  border-radius:30px;padding:30px;
  border:1px solid rgba(255,215,0,0.15);
  box-shadow:0 0 40px rgba(255,215,0,0.08);
}
.code{font-weight:700;font-size:18px;margin-bottom:15px;}
.badge{
  display:inline-block;padding:8px 20px;border-radius:999px;
  font-size:13px;font-weight:700;margin-right:10px;margin-top:5px;
}
.chip{background:#16a34a;color:black;}
.vip8{background:#7c3aed;box-shadow:0 0 25px #7c3aed;}
.vip9{background:#06b6d4;box-shadow:0 0 25px #06b6d4;}
.vip10{background:linear-gradient(90deg,#FFD700,#ffcc00,#FFD700);
color:black;box-shadow:0 0 40px gold;}

/* ADMIN */
.staff{
  display:flex;justify-content:space-between;align-items:center;
  background:#111c35;padding:15px;border-radius:20px;margin-bottom:20px;
}
.status{
  padding:8px 18px;border-radius:999px;font-size:12px;font-weight:700;cursor:pointer;
}
.open{background:#22c55e;color:black;}
.lock{background:#facc15;color:black;}
.copy{font-size:12px;color:#60a5fa;cursor:pointer;display:block;margin-top:5px;}
</style>
</head>
<body>

<div id="loginScreen" class="loginScreen">
  <div class="loginBox">
    <input type="text" id="adminEmail" placeholder="Gmail">
    <input type="password" id="adminPass" placeholder="M·∫≠t kh·∫©u">
    <button onclick="loginAdmin()">ƒêƒÇNG NH·∫¨P</button>
    <div id="errorMsg"></div>
  </div>
</div>

<div class="main">
  <div class="left">
    <div class="box">
      <div class="title">üëë CHECK VIP SYSTEM</div>
      <div class="inputRow">
        <input id="q" class="mainInput" placeholder="Nh·∫≠p m√£ c·∫ßn ki·ªÉm tra">
        <button class="checkBtn" onclick="check()">CHECK</button>
      </div>
      <div id="out"></div>
    </div>
  </div>

  <div class="right">
    <div class="adminBox">
      <h3>ADMIN PANEL</h3>

      <div class="staff">
        <div>
          <strong>Th·ª£ A</strong>
          <span class="copy" onclick="copyLink('THOA',this)">üîó Copy link</span>
        </div>
        <div class="status open" onclick="toggle(this,'THOA')">ƒêANG M·ªû</div>
      </div>

      <div class="staff">
        <div>
          <strong>Th·ª£ B</strong>
          <span class="copy" onclick="copyLink('THOB',this)">üîó Copy link</span>
        </div>
        <div class="status open" onclick="toggle(this,'THOB')">ƒêANG M·ªû</div>
      </div>

    </div>
  </div>
</div>

<script src="data.js"></script>
<script>

const params = new URLSearchParams(window.location.search);
const currentUser = params.get("u");

let staffs = JSON.parse(localStorage.getItem("staffs")) || {
  THOA:{open:true},
  THOB:{open:true}
};

// AUTO FILL (NOT AUTO LOGIN)
window.onload = function(){
  const savedEmail = localStorage.getItem("savedEmail");
  const savedPass  = localStorage.getItem("savedPass");
  if(savedEmail) document.getElementById("adminEmail").value = savedEmail;
  if(savedPass) document.getElementById("adminPass").value = savedPass;

  // th·ª£ v√†o kh√¥ng c·∫ßn login
  if(currentUser && currentUser !== "ADMIN"){
    document.getElementById("loginScreen").style.display="none";
    document.querySelector(".right").style.display="none";
    document.querySelector(".left").style.flex="1";
  }
};

function loginAdmin(){
  const email=document.getElementById("adminEmail").value.trim();
  const pass=document.getElementById("adminPass").value;
  const error=document.getElementById("errorMsg");

  if(email==="admin@gmail.com" && pass==="123456"){
    localStorage.setItem("savedEmail", email);
    localStorage.setItem("savedPass", pass);
    document.getElementById("loginScreen").style.display="none";
  }else{
    error.innerText="Sai Gmail ho·∫∑c m·∫≠t kh·∫©u!";
  }
}

function normalize(s){
  return s.toUpperCase().replace(/[^A-Z0-9]/g,"");
}

function detectChip(code){
  code = code.toUpperCase();
  if(code.startsWith("KM")||code.startsWith("KLM")||code.startsWith("KLU")||
     code.startsWith("KMB")||code.startsWith("KMQ")||code.startsWith("KMR")||
     code.startsWith("KMD")||code.startsWith("KMG")) return "SAMSUNG";
  if(code.startsWith("H9")||code.startsWith("H26")||code.startsWith("H28")||
     code.startsWith("H2")||code.startsWith("HN")) return "SK hynix";
  if(code.startsWith("JZ")||code.startsWith("MT")) return "MICRON";
  if(code.startsWith("THG")) return "KIOXIA";
  if(code.startsWith("SDIN")||code.startsWith("SD")) return "SANDISK";
  return "UNKNOWN";
}

function getVipClass(v){
  const n=parseInt(v.match(/\d+/));
  if(n==8) return "vip8";
  if(n==9) return "vip9";
  if(n==10) return "vip10";
  return "";
}

function check(){
  const out=document.getElementById("out");
  const key=normalize(document.getElementById("q").value);
  out.innerHTML="";
  if(!key) return;

  if(currentUser && currentUser!=="ADMIN"){
    const saved=JSON.parse(localStorage.getItem("staffs"));
    if(saved && saved[currentUser] && !saved[currentUser].open){
      out.innerHTML='<div style="padding:30px;background:#1e1b4b;border-radius:20px;text-align:center;font-weight:700;color:#facc15;">‚ö† T√ÄI KHO·∫¢N ƒê√É B·ªä KH√ìA</div>';
      return;
    }
  }

  data.forEach(x=>{
    if(normalize(x.code).includes(key)){
      out.innerHTML+=`
      <div class="item">
        <div class="code">‚ö° ${x.code}</div>
        <div class="badge chip">üü¢ ${detectChip(x.code)}</div>
        ${x.mmc?`<div class="badge" style="background:#0ea5e9;color:black;">üíæ ${x.mmc}</div>`:""}
        ${x.vip?`<div class="badge ${getVipClass(x.vip)}">üëë ${x.vip}</div>`:""}
      </div>`;
    }
  });
}

function toggle(el,key){
  staffs[key].open=!staffs[key].open;
  localStorage.setItem("staffs",JSON.stringify(staffs));
  el.classList.toggle("open");
  el.classList.toggle("lock");
  el.innerText=staffs[key].open?"ƒêANG M·ªû":"ƒêANG KH√ìA";
}

function copyLink(key,el){
  const url=window.location.origin+window.location.pathname+"?u="+key;
  navigator.clipboard.writeText(url);
  el.innerText="‚úî ƒê√É COPY";
  el.style.color="#22c55e";
  setTimeout(()=>{
    el.innerText="üîó Copy link";
    el.style.color="#60a5fa";
  },2000);
}

</script>
</body>
</html>
