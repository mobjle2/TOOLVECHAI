<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CHECK VIP SYSTEM</title>

<style>
body{margin:0;font-family:Segoe UI,Roboto,Arial;background:#0f172a;color:#f1f5f9;}
.main{display:flex;height:100vh;}
.left{flex:7;padding:40px;}
.right{flex:3;padding:30px;background:#081022;border-left:1px solid rgba(255,255,255,0.05);}
.box,.adminBox{background:#0b1220;border-radius:20px;padding:30px;height:100%;}
.title{text-align:center;font-size:26px;font-weight:700;margin-bottom:25px;color:gold;}
.inputRow{display:flex;gap:15px;}
.mainInput{flex:1;padding:15px;border-radius:15px;border:1px solid rgba(255,215,0,0.3);background:#111827;color:white;}
.checkBtn{padding:15px 35px;border-radius:15px;border:none;background:gold;color:black;font-weight:700;cursor:pointer;}
#out{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:15px;margin-top:25px;}
.item{background:#111827;padding:18px;border-radius:15px;}
.badge{display:inline-block;padding:6px 14px;border-radius:999px;font-size:12px;font-weight:700;margin-top:6px;}
.chip{background:#22c55e;color:black;}
.mmc{background:#0ea5e9;color:black;}
.vip{background:#6d28d9;}
.staff{display:flex;justify-content:space-between;align-items:center;background:#111c35;padding:12px;border-radius:12px;margin-bottom:12px;}
.status{padding:6px 14px;border-radius:999px;font-size:12px;font-weight:700;cursor:pointer;}
.open{background:#22c55e;color:black;}
.lock{background:#facc15;color:black;}
.copy{font-size:12px;color:#60a5fa;cursor:pointer;display:block;margin-top:4px;}
</style>
</head>
<body>

<div class="main">

  <div class="left">
    <div class="box">
      <div class="title">CHECK VIP SYSTEM</div>
      <div class="inputRow">
        <input id="q" class="mainInput" placeholder="Nháº­p mÃ£ cáº§n kiá»ƒm tra">
        <button class="checkBtn" onclick="check()">CHECK</button>
      </div>
      <div id="out"></div>
    </div>
  </div>

  <div class="right">
    <div class="adminBox">
      <h3>ADMIN PANEL</h3>

      <div class="staff">
        <div>
          <strong>Thá»£ A</strong>
          <span class="copy" onclick="copyLink('THOA')">ğŸ”— Copy link</span>
        </div>
        <div class="status open" onclick="toggle(this,'THOA')">ÄANG Má»</div>
      </div>

      <div class="staff">
        <div>
          <strong>Thá»£ B</strong>
          <span class="copy" onclick="copyLink('THOB')">ğŸ”— Copy link</span>
        </div>
        <div class="status open" onclick="toggle(this,'THOB')">ÄANG Má»</div>
      </div>

    </div>
  </div>

</div>

<script src="data.js"></script>
<script>
const params = new URLSearchParams(window.location.search);
const currentUser = params.get("u");

let staffs = JSON.parse(localStorage.getItem("staffs")) || {
  THOA:{open:true},
  THOB:{open:true}
};

if(currentUser && currentUser!=="ADMIN"){
  document.querySelector(".right").style.display="none";
  document.querySelector(".left").style.flex="1";
}

function normalize(s){
  return s.toUpperCase().replace(/[^A-Z0-9]/g,"");
}

function detectChip(code){
  code = code.toUpperCase();

  if(code.startsWith("KM")||code.startsWith("KLM")||code.startsWith("KLU")||
     code.startsWith("KMB")||code.startsWith("KMQ")||code.startsWith("KMR")||
     code.startsWith("KMD")||code.startsWith("KMG")){
    return "SAMSUNG";
  }

  if(code.startsWith("H9")||code.startsWith("H26")||code.startsWith("H28")||
     code.startsWith("H2")||code.startsWith("HN")){
    return "SK hynix";
  }

  if(code.startsWith("JZ")||code.startsWith("MT")){
    return "MICRON";
  }

  if(code.startsWith("THG")){
    return "KIOXIA";
  }

  if(code.startsWith("SDIN")||code.startsWith("SD")){
    return "SANDISK";
  }

  return "UNKNOWN";
}

function check(){
  const saved = JSON.parse(localStorage.getItem("staffs"));

  if(currentUser && currentUser!=="ADMIN"){
    if(saved && saved[currentUser] && !saved[currentUser].open){
      alert("TÃ i khoáº£n Ä‘ang bá»‹ khÃ³a!");
      return;
    }
  }

  const key=normalize(document.getElementById("q").value);
  const out=document.getElementById("out");
  out.innerHTML="";

  data.forEach(x=>{
    if(normalize(x.code).includes(key)){
      out.innerHTML+=`
        <div class="item">
          <div><strong>${x.code}</strong></div>
          <div class="badge chip">ğŸŸ¢ ${detectChip(x.code)}</div>
          ${x.mmc?`<div class="badge mmc">ğŸ’¾ ${x.mmc}</div>`:""}
          ${x.vip?`<div class="badge vip">ğŸ‘‘ ${x.vip}</div>`:""}
        </div>
      `;
    }
  });
}

function toggle(el,key){
  staffs[key].open = !staffs[key].open;
  localStorage.setItem("staffs", JSON.stringify(staffs));

  el.classList.toggle("open");
  el.classList.toggle("lock");
  el.innerText = staffs[key].open ? "ÄANG Má»" : "ÄANG KHÃ“A";
}

function copyLink(key){
  const url=window.location.origin+window.location.pathname+"?u="+key;
  navigator.clipboard.writeText(url);
  alert("ÄÃ£ copy: "+url);
}
</script>

</body>
</html>
